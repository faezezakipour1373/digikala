(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633,8590],{1026:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/plus/landing",function(){return i(46013)}])},68590:function(e,t,i){"use strict";i.r(t),i.d(t,{DigiplusSubscriptionModal:function(){return g}});var o=i(66383),n=i(52322),r=i(2784),s=i(63474),u=i(45756),a=i(691),d=i(5185),l=i(26442),c=i(72873),p=i(57394),v=i(64177),m=i(3417),h=i(41435),f=i(74740),x=i(12978),_=(0,i(1324).q)({url:"/digiplus/plans/",inputTransformer:function(e){return{hide_direct_debit:e.isHideDirectDebit}},transformer:function(e){var t,i=e.data||{},o=i.plans,n=i.services;return{plans:null==o?void 0:null===(t=o.map)||void 0===t?void 0:t.call(o,function(e){return(0,x.G)({data:e})}),services:null==n?void 0:n.map(function(e){var t;return{serviceTitle:(t=e||{}).title,serviceIcon:t.image,serviceDescription:t.desc}})}}});function g(e){var t=e.isOpenModal,i=e.onCloseModal,x=e.isDigiplusTemporaryModal,g=e.onAddSubscriptionCallback,D=e.isHideDirectDebitPlans,b=(0,v.C)(),P=b.isDesktop,I=b.windowWidth,y=(0,o.Z)((0,r.useState)(),2),L=y[0],S=y[1],N=(0,c.V)({disabled:!t,apiMethod:_,onSuccess:function(e){(0,h.x)(e.plans)||S(e.plans[0])},apiData:{isHideDirectDebit:void 0!==D&&D}}),T=N.data,U=T.plans,O=T.services,R=N.pending,j=(0,p.J)({action:m.o_}),C=j.request,M=j.pending;return(0,n.jsx)(s.u0,{isDigiplusTemporaryModal:x,isOpenModal:t,onCloseModal:i,isDesktop:P,windowWidth:I,isPending:R,isPendingAddSubscriptionTemporary:M,plans:U,services:O,paymentUrl:(0,l.py)({type:d.Rd.PLUS,id:null==L?void 0:L.planId}),activePlan:L,onClickPlan:function(e){return function(){return S(e)}},onAddPlusTemporary:function(){C({planId:null==L?void 0:L.planId}).then(function(){(0,f.m)(g)&&g(),(0,f.m)(i)&&i()})},CROIdClose:u.h.PLUS_ON_MODAL_CLOSE,CROIdAddSubscription:u.h.PLUS_ON_MODAL_ADD,CROIdAddToCart:u.h.PLUS_ON_MODAL_ADD_TO_CART,CROIdDirectDebitNotice:u.h.PLUS_SUBSCRIPTION_MODAL_DETAILS,directDebitDetailsLink:a.Fo})}},46013:function(e,t,i){"use strict";i.r(t),i.d(t,{__getServerSideProps:function(){return S},default:function(){return L}});var o=i(52322),n=i(97729),r=i.n(n),s=i(63474),u=i(86347),a=i(45756),d=i(691),l=i(26442),c=i(64177),p=i(80803),v=i(27314),m=i(87049),h=i(6013),f=i(41701),x=i(98661),_=i(53548),g=i(68590),D=i(93787),b=i(12978),P=i(95542),I=i(12773),y=(0,i(1324).q)({url:"/digiplus/",transformer:function(e){var t,i,o,n=e.data||{},r=n.total_subscriptions_count,s=n.can_buy_subscription,u=n.cta_sentence,a=n.faq,d=n.incredible_products,l=n.early_access_products,c=n.cash_back_products,p=n.jet_delivery_products,v=n.plans,m=n.digiplus_vouchers;return{digiplusTotalSubscriptionsCount:r,digiplusCanBuySubscription:!!s,digiplusPrimaryButtonText:u,digiplusFaqs:null==a?void 0:null===(t=a.map)||void 0===t?void 0:t.call(a,function(e){return(0,P.K)({data:e})}),digiplusIncredibleProducts:(0,D.$)({data:d}),digiplusEarlyAccessProducts:(0,D.$)({data:l}),digiplusCashBackProducts:(0,D.$)({data:c}),digiplusJetDeliveryProducts:(0,D.$)({data:p}),digiplusPlans:null==v?void 0:null===(i=v.map)||void 0===i?void 0:i.call(v,function(e){return(0,b.G)({data:e})}),digiclubVouchers:null==m?void 0:null===(o=m.map)||void 0===o?void 0:o.call(m,function(e){return(0,I.T)({data:e})})}},isPageGetRequest:!0}),L=(0,f.D)({component:function(e){var t,i=e.ssrData,n=(0,p.d)(),f=n.isOpen,D=n.onOpen,b=n.onClose,P=(0,v.e)().redirect,I=(0,m.v)(h.p.digiplusData),y=(0,m.v)(h.p.isLoggedIn),L=null==I?void 0:I.digiplusIsActivated,S=null==I?void 0:null===(t=I.digiplusSubscription)||void 0===t?void 0:t.digiplusSubscriptionRemainingDays,N=(0,c.C)().isDesktop,T=(0,m.v)(h.p.digiclubData).digiclubPoints;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r(),{children:(0,o.jsx)("title",{children:(0,x.t)({title:"دیجی‌پلاس",suffix:"خدمات ویژه کاربران دیجی‌کالا"})})}),(0,o.jsx)(s.fy,{data:i,isLoggedIn:y,isPlusUser:L,remainingDays:S,profileLink:l.iV,loginLink:(0,_.U)({toLoginRegisterRoute:!0}),onOpenSubscriptionModal:D,onGoToProfile:function(){P({url:l.iV})},CROIdPrimaryButton:a.h.PLUS_LANDING_SUBSCRIPTION,CROIdServicesButton:a.h.PLUS_LANDING_SERVICE,CROIdBuyButton:a.h.PLUS_LANDING_STATS,CROIdRegisterButton:a.h.PLUS_LANDING_BENEFITS,contactUsLink:"".concat(l.dT,"?subject_id=9"),fidiplusLink:d.bZ,freeShipmentLink:(0,l.MN)(1376),CROIdQuestion:a.h.FAQ_WRITTEN_QUESTION,CROIdFAQ:a.h.PLUS_LANDING_FAQ,isDesktop:N,digiclubPoints:T,renderVoucherModalComponent:function(e){var t=e.id,i=e.type,n=e.title,r=e.instruction,s=e.requirePoints,a=e.voucherUserRedeemHistory,d=e.maximumDownload,l=e.voucherUserDownloaded,c=e.close,p=e.isModalOpen;return(0,o.jsx)(u.K,{close:c,isModalOpen:p,isPlus:!0,id:t,type:i,title:n,instruction:r,requirePoints:s,voucherUserRedeemHistory:a,maximumDownload:d,voucherUserDownloaded:l,isPlusUser:L})}}),(0,o.jsx)(g.DigiplusSubscriptionModal,{isOpenModal:f,onCloseModal:b})]})},getAPIMethods:function(){return[{apiMethod:y}]},layoutProps:{chatKey:"digiplus",noContentPadding:!0,desktopFullWidth:!0},noDefaultLoader:!0}),S=(0,i(40171).I)({getSSRMethods:L.getAPIMethods})},86347:function(e,t,i){"use strict";i.d(t,{K:function(){return N}});var o=i(66383),n=i(52322),r=i(2784),s=i(59437),u=i(98780),a=i(50603),d=i(26442),l=i(52216),c=i(72677),p={VOUCHER:"voucher",LOTTERY:"lottery"},v=i(57931),m=i(36696),h=i(5273),f=i.n(h);function x(e){var t=e.className,i=e.code,s=(0,o.Z)((0,r.useState)("low-emphasis"),2),a=s[0],d=s[1],l=(0,o.Z)((0,m.m)(),2),p=l[0],v=l[1],h=(0,c.d)("w-67 relative mx-auto bg-no-repeat bg-top lg:text text-neutral-900 hover:text-digikala-500 font-bold py-5 cursor-pointer transition duration-100 ease-in-out",f().VoucherBox,t);return(0,n.jsxs)("div",{className:h,onClick:function(){v(i)},onMouseEnter:function(){d("primary")},onMouseLeave:function(){d("low-emphasis")},children:[(0,n.jsxs)("div",{className:(0,c.d)("flex justify-center items-center relative",f().VoucherBox__content),children:[(0,n.jsx)("span",{className:"text-body-1",children:i}),(0,n.jsx)(u.J,{icon:"copy",color:a,size:18,className:"mr-2 relative"})]}),p&&(0,n.jsxs)("div",{className:"inline-flex items-center py-2 px-3 bg-neutral-700 border-complete border-n-900 rounded xs:text text-neutral-000 absolute left-1/2 transform -translate-x-1/2 bottom-10 transform translate-y-full -translate-x-3",children:["کد تخفیف کپی شد",(0,n.jsx)("span",{className:"w-5/2 h-5/2 absolute bg-neutral-700 border-2 border-n-900 transform absolute left-0 top-0 -rotate-45 -translate-y-3/2 translate-x-4 border-complete-l-0 border-complete-b-0"})]})]})}var _=i(64665),g=i(45756),D=i(57394),b=i(87049),P=i(6013),I=i(46943),y=i(42306),L=i(53548);function S(e){var t=e.id,i=e.url,u=e.type,a=e.isPlus,l=e.isPlusUser,c=e.setVoucher,p=e.requirePoints,m=e.maximumDownload,h=e.actionButtonTitle,f=e.isVoucherPlusExclusive,S=e.voucherUserRedeemHistory,N=e.voucherUserDownloaded,T=(0,b.v)(P.p.isLoggedIn),U=(0,D.J)({action:I.p$}),O=U.request,R=U.pending,j=(0,o.Z)((0,r.useState)(N>=m),2),C=j[0],M=j[1],A=(0,b.v)(P.p.digiclubData).digiclubPoints;return T?S&&!(0,y.d)(_.X.VOUCHER_MAX_DOWNLOAD)?(0,n.jsx)(x,{code:S}):C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full text-center text-body-2 text-neutral-500 mb-2",children:"تعداد دفعات استفاده از این کد تخفیف برای شما به پایان رسیده است."}),(0,n.jsx)(v.z,{disabled:!0,isLoading:R,children:h})]}):void 0!==a&&a&&void 0!==f&&f&&!(void 0!==l&&l)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full text-center text-body-2 text-neutral-500 mb-2",children:"شما اشتراک دیجی‌پلاس ندارید"}),(0,n.jsx)(s.e,{mode:"link",href:d.LX,children:(0,n.jsx)(v.z,{className:"w-full",CROId:g.h.PLUS_LANDING_DIGICLUB_MEMBERSHIP,isLoading:R,children:"عضویت در دیجی‌پلاس"})})]}):A>=p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full text-center text-body-2 text-neutral-500 mb-2",children:"با دریافت جایزه، امتیاز کسر شده قابل بازگشت نیست."}),(0,n.jsx)(v.z,{onClick:function(){T&&O({id:t,type:u}).then(function(e){(null==e?void 0:e.code)&&c(null==e?void 0:e.code),(null==e?void 0:e.downloadedVouchers)>=m&&M(!0)})},CROId:g.h.PLUS_LANDING_DIGICLUB_GET_REWARD,isLoading:R,children:h})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full text-center text-body-2 text-neutral-500 mb-2",children:"شما امتیاز کافی برای دریافت این جایزه ندارید."}),(0,n.jsx)(v.z,{mode:"outlined",color:"primary",to:i,children:"مشاهده روش ‌های افزایش امتیاز"})]}):(0,n.jsx)(v.z,{to:(0,L.U)({toLoginRegisterRoute:!0}),mode:"outlined",color:"primary",className:"mt-2",children:"ابتدا وارد شوید."})}function N(e){var t=e.id,i=e.type,v=e.title,m=e.close,h=e.urlTitle,f=e.isPlus,_=e.isPlusUser,g=e.isModalOpen,D=e.className,b=e.instruction,P=e.maximumDownload,I=e.voucherUserRedeemHistory,y=e.isVoucherPlusExclusive,L=e.voucherUserDownloaded,N=e.url,T=void 0===N?d.r:N,U=e.requirePoints,O=i===p.LOTTERY?"جزییات کد قرعه‌کشی":"جزییات کد تخفیف",R=i===p.LOTTERY?"دریافت کد قرعه‌کشی":"دریافت جایزه",j=(0,o.Z)((0,r.useState)(null),2),C=j[0],M=j[1];return(0,n.jsx)(a.Modal,{headerTitle:O,isOpen:g,onDismiss:function(){M(null),m()},isFooterFixed:!0,footer:(0,n.jsx)("div",{className:"flex flex-col user-select-none",children:C?(0,n.jsx)(x,{code:C}):(0,n.jsx)(S,{id:t,url:T,type:i,setVoucher:M,requirePoints:void 0===U?0:U,isVoucherPlusExclusive:void 0!==y&&y,isPlus:void 0!==f&&f,isPlusUser:void 0!==_&&_,maximumDownload:P,actionButtonTitle:R,voucherUserDownloaded:L,voucherUserRedeemHistory:I})}),children:(0,n.jsx)("div",{className:(0,c.d)("px-4 pb-4 bg-neutral-000 rounded mx-auto",D),children:(0,n.jsxs)("div",{className:"pt-4 overflow-auto",children:[(0,n.jsx)("div",{className:"mb-3 text-neutral-900 text-h4",children:(0,l.U)(v)}),b&&(0,n.jsx)("div",{className:"text-neutral-700 text-body-1",dangerouslySetInnerHTML:{__html:b}}),T&&h&&(0,n.jsx)("div",{className:"flex items-center mt-2",children:(0,n.jsxs)(s.e,{href:T,children:[h,(0,n.jsx)(u.J,{icon:"externalLink",size:18,className:"mr-1"})]})})]})})})}},93787:function(e,t,i){"use strict";i.d(t,{$:function(){return s}});var o=i(70582),n=i(15393),r=i(79968);function s(e){var t=e.data||{},i=t.discount_percent,s=t.products,u=t.products_count,a=t.see_more_url,d=t.url,l=t.title,c=t.description,p=t.background,v=t.icon,m=t.early_access_url;return{productsDiscountPercent:i,productsBackgroundImage:(0,o.W)({data:p}),productsIconImage:(0,o.W)({data:v}),products:Object.values(s||{}).map(function(e){return(0,n.r)({data:e})}),productsCount:u,productsSeeMoreUrl:(0,r.f)({data:a||d}),productsTitle:l,productsDescription:c,productsBackground:p,productsIcon:v,plusEarlyAccessUrl:(0,r.f)({data:m}),bigDataTrackerData:{}}}},95542:function(e,t,i){"use strict";i.d(t,{K:function(){return a}});var o=i(70865),n=i(64248),r=i(70582),s=i(79968),u=i(75743);function a(e){var t,i=e.data,a=e.prefix,d=i||{},l=d.id,c=d.title,p=d.see_more_url,v=d.icon,m=d.questions,h=(0,r.W)({data:v,prefix:"faqIcon"});return(0,n.Y)((0,o.Z)({faqIcon:(0,r.W)({data:v}),faqId:l,faqTitle:c,faqSeeMoreUrl:(0,s.f)({data:p}),faqQuestions:(null==m?void 0:null===(t=m.map)||void 0===t?void 0:t.call(m,function(e){return(0,u.Q)({data:e})}))||[]},h),{prefix:a})}},12773:function(e,t,i){"use strict";i.d(t,{T:function(){return n}});var o=i(70582);function n(e){var t=e.data||{},i=t.business,n=t.expiration_date,r=t.instruction,s=t.id,u=t.type,a=t.title,d=t.required_points_discount,l=t.required_points,c=t.promotion_badge_title,p=t.user_redeem_history,v=t.finished,m=t.start_date_timestamp,h=t.expiration_date_timestamp,f=t.maximum_download,x=t.downloaded_count,_=t.is_plus_exclusive,g=(p||{}).code,D=i||{},b=D.title,P=D.logo;return{voucherBusiness:{voucherBusinessLogo:(0,o.W)({data:P}),voucherBusinessTitle:b},voucherBusinessLogoUrl:(0,o.W)({data:P}).imageSrc,voucherBusinessTitle:b,voucherIsPlusExclusive:_,voucherExpirationDate:n,voucherInstruction:r,voucherId:s,voucherType:u,voucherTitle:a,voucherRequiredPointsDiscount:d,voucherRequiredPoints:l,voucherPromotionBadgeTitle:c,voucherUserRedeemHistory:g,voucherIsFinished:!!v,voucherStartDate:m,voucherExpirationDateTimeStamp:h,voucherMaximumDownload:f,voucherUserDownloaded:x}}},41701:function(e,t,i){"use strict";function o(e){var t=e.component,i=e.getAPIMethods,o=e.layoutProps,n=e.isPrivate,r=e.noDefaultLoader,s=e.pageActivatorFeature,u=e.redirectIfLogin,a=e.afterLogin,d=e.disableSSR,l=e.dataProps;return t.getAPIMethods=i,t.layoutProps=o,t.isPrivate=n,t.noDefaultLoader=r,t.pageActivatorFeature=s,t.redirectIfLogin=u,t.afterLogin=a,t.disableSSR=d,t.dataProps=l,t}i.d(t,{D:function(){return o}})},98661:function(e,t,i){"use strict";function o(e){var t=e.title,i=void 0===t?"":t,o=e.suffix,n=void 0===o?"":o,r=e.prefix,s=void 0===r?"":r;return"".concat(s?"".concat(s," - "):"","دیجی‌کالا").concat(i?" - ".concat(i):"").concat(n?" - ".concat(n):"")}i.d(t,{t:function(){return o}})},5273:function(e){e.exports={VoucherBox:"styles_VoucherBox__Cax_0",VoucherBox__content:"styles_VoucherBox__content__E_z7n"}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=1026)}),_N_E=e.O()}]);